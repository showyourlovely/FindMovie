### 哈哈电影制作流程

前几年的时候已经接触到混合开发了，在公司做产品的时候也会做一些和原生交互的一些工作，写一些H5页面嵌入到native中，利用JSBridge进行交互

其实也了解了一些依靠使用工具来完成混合app的开发的技术，比如phonegap、Dcloud的产品，react-native、weex也在持续的关注。

这里我利用一些闲暇事件做了一款纯H5主导的HybridAPP，数据就是自己模拟还有调用豆瓣、卖座等电影门户网站的真实接口实现

产品架构就是使用Mui进行高效的界面开发、H5+tuntime去调用原生的功能、云打包技术打包安装包，从技术开发来说首页利用vue进行开发，简洁高效，但是不会采取单页面应用开发，为了能提高性能，而是通过创建多个webview来嵌套H5页面的方法来提高界面切换的流畅度和用户体验。

产品主要的功能模块有：

首页焦点图、分类数据展示、列表类型切换、上下拉刷新加载、搜索模块、详情、个人中心、登陆验证、第三方登陆、图像拍照上传等等功能，还在完善！

开发流程：

因为采取的是webview切换的架构，所以会在index.html仅仅放一个底部，并且初始化的时候，利用plus.webview.create创建了对应的子窗口并嵌入了H5页面，控制只有首页窗口显示其他的隐藏

首页采取了vue进行组件化开发，利用swiper实现焦点图，利用了mui中的区域滑动，实现了类型影片滚动效果

列表页中采用了上下拉加载刷新的api，采用的双webview模式，将list-content窗口嵌入到list窗口中，在listcontent中实现具体逻辑，初始默认上拉加载一次，当list窗口点击不同类别的按钮后，利用mui.fire进行了不同窗口间的通信，list-content定义好切换类型后需要做的事情在一个事件的处理程序中，list点击触发该事件来实现

点击搜索图标，利用mui.openWindows实现打开搜索的窗口，并且在搜索界面也有上下拉属性加载的效果

点击电影item，打开详情页窗口，在openWindow中配置extras来传递关键id参数，在详情窗口中，直接引入了豆瓣电影的对应的详情H5页面，利用了evalJS在该页面中执行一些代码提高与窗口的匹配度

实现了个人中心的登陆验证，点击未登录按钮打开登陆页，在登陆窗口中实现了第三方登陆获取用户信息，并通知mine窗口再次获取信息

点击登陆之后的头像，调用原生的actionSheet来选择更改头像的方式，并调用camera、galley的api来选择头像并保存在用户信息中。